<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assisement</title>
</head>
<body>
    <h1>Promises, Async/ Await</h1><br>
    <p>Que.1 Write one example explaining how you can write a callback function.
    </p>
    <p>Answer:</p>
    <pre>
        function greeting(name, callback) {
            console.log('Hello ' + name + '!');
            callback();
          }
          
          function sayGoodbye() {
            console.log('Goodbye!');
          }
          
          greeting('Pankaj', sayGoodbye);
    </pre><br>

<p>Que.2 Write a callback function to print numbers from 1 to 7, in which 1 should be printed after 1 sec, 2 should be printed after 2 sec, 3 should be printed after 3 sec, and so on. 
</p>
<p>Answer:</p>
<pre>
    function printNumbersWithDelay(callback) {
        let count = 1;
        const interval = setInterval(() => {
          console.log(count);
          count++;
          if (count > 7) {
            clearInterval(interval);
            if (callback) {
              callback();
            }
          }
        }, 1000);
      }
      printNumbersWithDelay(() => {
        console.log('All done!');
      });
</pre><br>

<p>Que.3 Write the promise function to print numbers from 1 to 7, in which 1 should be printed after 1 sec, 2 should be printed after 2 sec, 3 should be printed after 3 sec, and so on.
</p>
<p>Answer:</p>
<pre>
    function printNumbersWithDelay() {
        return new Promise((resolve, reject) => {
          let i = 1;
          const intervalId = setInterval(() => {
            console.log(i);
            i++;
            if (i > 7) {
              clearInterval(intervalId);
              resolve();
            }
          }, i * 1000);
        });
      }
      
      printNumbersWithDelay()
        .then(() => console.log("Finished!"))
        .catch((error) => console.error(error));
</pre>

<p>Que.4 Create a promise function accepting an argument, if yes is passed to the function then it should go to resolved state and print Promise Resolved, and if nothing is passed 
    then it should go to reject the state and catch the error and print Promise Rejected
</p>
<p>Answer:</p>
<pre>
    function promiseFunction(arg) {
        return new Promise((resolve, reject) => {
          if (arg === "yes") {
            resolve("Promise Resolved");
          } else {
            reject("Promise Rejected");
          }
        });
      }
      promiseFunction("yes")
        .then((result) => console.log(result))
        .catch((error) => console.log(error));
</pre>
<p>Que.5 Create examples to explain callback function
</p>
<p>Answer:</p>
<pre>
    function fetchData(callback) {
        setTimeout(() => {
          const data = { name: "Pankaj", age: 22 };
          callback(data);
        }, 1000);
      }
      
      fetchData((data) => {
        console.log(data); // { name: "Pankaj", age: 22 }
      });
</pre>
<p>Que.6 Create examples to explain callback hell function
</p>
<p>Answer:</p>
<pre>
    function getData(callback) {
        setTimeout(function() {
          callback('Data received');
        }, 2000);
      }
      
      getData(function(data) {
        console.log(data);
      
        getData(function(data) {
          console.log(data);
      
          getData(function(data) {
            console.log(data);
          });
        });
      });
</pre>
<p>Que.7 Create examples to explain promises function
</p>
<p>Answer:</p>
<pre>
    const myPromise = new Promise((resolve, reject) => {
          setTimeout(() => {
            resolve("Hello, World!");
          }, 1000);
        });
        
        myPromise.then((message) => {
          console.log(message); // logs "Hello, World!" after 1 second
        });
</pre>
<p>Que.8 Create examples to explain async await function
</p>
<p>Answer:</p>
<pre>
    async function fetchData() {
        try {
          const response = await fetch('https://jsonplaceholder.typicode.com/todos/1'); // Fetch data from API
          const data = await response.json(); // Parse response to JSON
          console.log(data); // Log the data
        } catch (error) {
          console.error('Error fetching data:', error); // Log any errors
        }
      }
      
      fetchData(); // Call the async function
</pre>
<p>Que.9 Create examples to explain promise.all function
</p>
<p>Answer:</p>
<pre>
    const api1 = 'https://jsonplaceholder.typicode.com/todos/1';
  const api2 = 'https://jsonplaceholder.typicode.com/todos/2';
  const api3 = 'https://jsonplaceholder.typicode.com/todos/3';
  
  // We can use `Promise.all` to fetch data from all three APIs simultaneously
  const promises = [fetch(api1), fetch(api2), fetch(api3)];
  
  Promise.all(promises)
    .then(responses => {
      // responses is an array of resolved values from the input promises
      // We can access the data from each response and process it as needed
      const data1 = responses[0].json();
      const data2 = responses[1].json();
      const data3 = responses[2].json();
      console.log(data1, data2, data3);
    })
    .catch(error => {
      // If any of the promises reject, the error will be caught here
      console.error(error);
    });
      
</pre>
</body>
</html>